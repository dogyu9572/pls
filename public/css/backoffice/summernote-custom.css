/**
 * Summernote 에디터 커스텀 스타일
 */

/* 사이드바 토글 버튼 강제 표시 (모바일에서만) */
@media (max-width: 768px) {
    .sidebar-toggle {
        display: flex !important;
        align-items: center;
    }
    
    /* 모바일에서 사이드바 슬라이드 효과 */
    .sidebar {
        position: fixed !important;
        left: 0 !important;
        width: 260px !important;
        height: 100vh !important;
        min-height: 200vh !important;
        background-color: #343a40 !important;
        z-index: 9999 !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease !important;
    }
    
    .sidebar.active {
        transform: translateX(0) !important;
    }
}

/* Summernote 공식 사이트 스타일 */
.note-toolbar {
    background: #f8f9fa !important;
    border: 1px solid #e9ecef !important;
    border-bottom: none !important;
    border-radius: 6px 6px 0 0 !important;
    padding: 8px 12px !important;
    margin-bottom: 0 !important;
}

/* Summernote 전용 스타일 - buttons.css와의 충돌 방지 */
.note-toolbar .note-btn-group {
    margin-right: 8px !important;
    gap: 0 !important; /* buttons.css의 gap 제거 */
    display: inline-flex !important; /* buttons.css의 flex 제거 */
    flex-wrap: nowrap !important; /* buttons.css의 flex-wrap 제거 */
}

/* 버튼 기본 스타일 */
.note-toolbar .note-btn {
    background: white !important;
    border: 1px solid #dee2e6 !important;
    color: #333 !important;
    padding: 6px 8px !important;
    transition: all 0.2s ease !important;
    font-size: 14px !important;
    border-radius: 4px !important;
    margin: 0 !important;
    min-width: auto !important;
    flex: none !important; /* buttons.css의 flex 영향 제거 */
}

/* 버튼 호버 효과 */
.note-toolbar .note-btn:hover {
    background: #f8f9fa !important;
    border-color: #adb5bd !important;
    color: #000 !important;
}

/* 활성화된 버튼 */
.note-toolbar .note-btn.active {
    background: #e9ecef !important;
    border-color: #adb5bd !important;
    color: #000 !important;
}

/* 드롭다운 화살표 색상 */
.note-toolbar .note-btn-group .note-btn.dropdown-toggle::after {
    border-top-color: #333 !important;                
    position: relative !important;
    top: 1px !important;
}

/* 드롭다운 버튼 영역 넓히기 */
.note-toolbar .note-btn-group .note-btn.dropdown-toggle {
    padding-right: 12px !important;
    min-width: 30px !important;
}

/* 색상 선택 버튼 */
.note-toolbar .note-btn-group .note-btn[data-event="foreColor"],
.note-toolbar .note-btn-group .note-btn[data-event="backColor"] {
    padding-right: 16px !important;
    min-width: 70px !important;
}

/* 에디터 프레임 */
.note-editor.note-frame {
    border: 1px solid #e9ecef !important;
    border-radius: 6px !important;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    overflow: hidden;
}

/* 에디터 내용 영역 */
.note-editable {
    padding: 16px !important;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
    line-height: 1.6 !important;
    color: #212529 !important;
    font-size: 14px !important;
}

/* 드롭다운 메뉴 */
.note-dropdown-menu {
    border: 1px solid #dee2e6 !important;
    border-radius: 4px !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    background: white !important;
    padding: 4px 0 !important;
    max-height: 300px !important; /* 최대 높이 설정 */
    overflow-y: auto !important; /* 스크롤 가능 */
    z-index: 9999 !important; /* 다른 요소 위에 표시 */
    position: absolute !important;
}

/* Summernote tooltip 완전 비활성화 */
.note-tooltip,
.note-popover,
.note-toolbar .note-btn[title]:hover::after,
.note-toolbar .note-btn[title]:hover::before,
.note-toolbar .note-btn[data-original-title]:hover::after,
.note-toolbar .note-btn[data-original-title]:hover::before {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

.note-dropdown-menu .note-btn {
    background: white !important;
    color: #495057 !important;
    border: none !important;
    padding: 6px 16px !important;
    border-radius: 0 !important;
    white-space: nowrap !important; /* 텍스트 줄바꿈 방지 */
}

.note-dropdown-menu .note-btn:hover {
    background: #f8f9fa !important;
    color: #212529 !important;
}

/* 드롭다운 메뉴 위치 조정 */
.note-dropdown-menu {
    min-width: 120px !important;
    max-width: 200px !important;
}

/* 폰트 크기 드롭다운 특별 처리 */
.note-dropdown-menu[data-event="fontSize"] {
    max-height: 250px !important;
    overflow-y: auto !important;
}

/* 색상 선택 드롭다운 특별 처리 */
.note-dropdown-menu[data-event="foreColor"],
.note-dropdown-menu[data-event="backColor"] {
    max-height: 200px !important;
    overflow-y: auto !important;
}

/* 그룹 간 구분선 제거 */
.note-toolbar .note-btn-group:not(:last-child)::after {
    display: none !important;
}

/* 버튼 그룹 내부 간격 */
.note-toolbar .note-btn-group .note-btn + .note-btn {
    margin-left: 0 !important;
}

/* 아이콘 색상 */
.note-toolbar .note-btn i {
    color: #333 !important;
}

/* 드롭다운 버튼 내부 간격 최적화 */
.note-toolbar .note-btn-group .note-btn.dropdown-toggle {
    padding-right: 8px !important;
}

/* 비디오 컨테이너 스타일 - 비디오 삽입 기능용 */
.video-container {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 비율 */
    height: 0;
    overflow: hidden;
    margin: 20px 0;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}

/* 에디터 내부 비디오 스타일 */
.note-editable .video-container {
    max-width: 100%;
    margin: 16px auto;
}

/* Summernote 에디터 컨테이너 z-index 설정 */
.note-editor {
    position: relative !important;
    z-index: 1000 !important;
}

.note-toolbar {
    position: relative !important;
    z-index: 1001 !important;
}

/* 드롭다운 메뉴가 다른 요소에 가려지지 않도록 */
.note-dropdown-menu {
    z-index: 9998 !important;
    position: absolute !important;
}

/* Summernote 모달 완전 분리 */
.note-modal {
    z-index: 999999 !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background-color: rgba(0, 0, 0, 0.5) !important;
}

.note-modal .modal-dialog {
    z-index: 1000000 !important;
    position: relative !important;
    margin: 50px auto !important;
    pointer-events: auto !important;
}

.note-modal .modal-content {
    z-index: 1000001 !important;
    pointer-events: auto !important;
    position: relative !important;
}

/* modal-backdrop 숨김 처리 */
.modal-backdrop {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    z-index: -1 !important;
    pointer-events: none !important;
}

.modal-backdrop.show {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    z-index: -1 !important;
    pointer-events: none !important;
}
